import telebot
from telebot import types

# üîë –¢–≤–æ–π —Ç–æ–∫–µ–Ω –∏ ID –∞–¥–º–∏–Ω–∞
TOKEN = "8346101623:AAGOAzzq3MP6xziGXd8zZnhRcb83uCNYzR4"
ADMIN_ID = 8211811011
bot = telebot.TeleBot(TOKEN)

# üìå –•—Ä–∞–Ω–∏–º –≤—ã–±—Ä–∞–Ω–Ω—ã–π —è–∑—ã–∫ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π
user_languages = {}

# --- –ö–æ–º–∞–Ω–¥–∞ /start ---
@bot.message_handler(commands=['start'])
def start(message):
    # üóë —É–±–∏—Ä–∞–µ–º —Å—Ç–∞—Ä—É—é ReplyKeyboard
    remove_markup = types.ReplyKeyboardRemove()
    bot.send_message(
        message.chat.id,
        "üëã –î–æ–±—Ä–æ –ø–æ–∂–∞–ª–æ–≤–∞—Ç—å –≤ –æ—Ñ–∏—Ü–∏–∞–ª—å–Ω—ã–π —á–∞—Ç-–±–æ—Ç –Æ–ö–£ –∏–º. –ú.–û. –ê—É—ç–∑–æ–≤–∞!\n\n–í—ã–±–µ—Ä–∏—Ç–µ —Ä–∞–∑–¥–µ–ª:",
        reply_markup=remove_markup
    )

    # –ø–æ–∫–∞–∑—ã–≤–∞–µ–º –≤—ã–±–æ—Ä —è–∑—ã–∫–∞
    choose_language(message)

# --- –ú–µ–Ω—é –≤—ã–±–æ—Ä–∞ —è–∑—ã–∫–∞ (—Å–ø–∏—Å–∫–æ–º, KZ –ø–µ—Ä–≤—ã–º) ---
def choose_language(message, edit=False, call=None):
    markup = types.InlineKeyboardMarkup(row_width=1)
    btn1 = types.InlineKeyboardButton("üá∞üáø “ö–∞–∑–∞“õ—à–∞", callback_data="lang_kz")
    btn2 = types.InlineKeyboardButton("üá∑üá∫ –†—É—Å—Å–∫–∏–π", callback_data="lang_ru")
    btn3 = types.InlineKeyboardButton("üá¨üáß English", callback_data="lang_en")
    markup.add(btn1, btn2, btn3)

    text = "–¢—ñ–ª–¥—ñ —Ç–∞“£–¥–∞“£—ã–∑ / –í—ã–±–µ—Ä–∏—Ç–µ —è–∑—ã–∫ / Choose language:"

    if edit and call:  # –µ—Å–ª–∏ —Ä–µ–¥–∞–∫—Ç–∏—Ä—É–µ–º —Å—Ç–∞—Ä–æ–µ —Å–æ–æ–±—â–µ–Ω–∏–µ
        bot.edit_message_text(
            chat_id=call.message.chat.id,
            message_id=call.message.message_id,
            text=text,
            reply_markup=markup
        )
    else:  # –µ—Å–ª–∏ –ø–µ—Ä–≤—ã–π –∑–∞–ø—É—Å–∫
        bot.send_message(message.chat.id, text, reply_markup=markup)

# --- –û–±—Ä–∞–±–æ—Ç–∫–∞ –≤—ã–±–æ—Ä–∞ —è–∑—ã–∫–∞ ---
@bot.callback_query_handler(func=lambda call: call.data.startswith("lang_"))
def callback_language(call):
    lang = call.data.split("_")[1]
    user_languages[call.from_user.id] = lang

    if lang == "ru":
        text = "üá∑üá∫ –ì–ª–∞–≤–Ω–æ–µ –º–µ–Ω—é:"
        buttons = [
            ("üéì –ê–±–∏—Ç—É—Ä–∏–µ–Ω—Ç–∞–º", "menu_applicants"),
            ("üéì –°—Ç—É–¥–µ–Ω—Ç–∞–º", "menu_students"),
            ("üìû –ö–æ–Ω—Ç–∞–∫—Ç—ã", "menu_contacts"),
            ("‚ùì –ó–∞–¥–∞—Ç—å –≤–æ–ø—Ä–æ—Å –ò–ò", "menu_ai"),
            ("üåê –°–º–µ–Ω–∏—Ç—å —è–∑—ã–∫", "menu_lang")
        ]
    elif lang == "kz":
        text = "üá∞üáø –ë–∞—Å—Ç—ã –º”ô–∑—ñ—Ä:"
        buttons = [
            ("üéì –¢–∞–ª–∞–ø–∫–µ—Ä–ª–µ—Ä–≥–µ", "menu_applicants"),
            ("üéì –°—Ç—É–¥–µ–Ω—Ç—Ç–µ—Ä–≥–µ", "menu_students"),
            ("üìû –ë–∞–π–ª–∞–Ω—ã—Å", "menu_contacts"),
            ("‚ùì –°“±—Ä–∞“õ “õ–æ—é AI", "menu_ai"),
            ("üåê –¢—ñ–ª–¥—ñ –∞—É—ã—Å—Ç—ã—Ä—É", "menu_lang")
        ]
    else:
        text = "üá¨üáß Main menu:"
        buttons = [
            ("üéì For Applicants", "menu_applicants"),
            ("üéì For Students", "menu_students"),
            ("üìû Contacts", "menu_contacts"),
            ("‚ùì Ask AI", "menu_ai"),
            ("üåê Change Language", "menu_lang")
        ]

    markup = types.InlineKeyboardMarkup(row_width=1)
    for btn_text, btn_callback in buttons:
        markup.add(types.InlineKeyboardButton(btn_text, callback_data=btn_callback))

    # —Ä–µ–¥–∞–∫—Ç–∏—Ä—É–µ–º —Å—Ç–∞—Ä–æ–µ —Å–æ–æ–±—â–µ–Ω–∏–µ
    bot.edit_message_text(
        chat_id=call.message.chat.id,
        message_id=call.message.message_id,
        text=text,
        reply_markup=markup
    )

# --- –û–±—Ä–∞–±–æ—Ç–∫–∞ –º–µ–Ω—é ---
@bot.callback_query_handler(func=lambda call: call.data.startswith("menu_"))
def callback_menu(call):
    lang = user_languages.get(call.from_user.id, "ru")

    if call.data == "menu_applicants":
        text = {"ru": "–ò–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –¥–ª—è –∞–±–∏—Ç—É—Ä–∏–µ–Ω—Ç–æ–≤...",
                "kz": "–¢–∞–ª–∞–ø–∫–µ—Ä–ª–µ—Ä–≥–µ –∞—Ä–Ω–∞–ª“ì–∞–Ω –∞“õ–ø–∞—Ä–∞—Ç...",
                "en": "Information for applicants..."}[lang]
    elif call.data == "menu_students":
        text = {"ru": "–ò–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –¥–ª—è —Å—Ç—É–¥–µ–Ω—Ç–æ–≤...",
                "kz": "–°—Ç—É–¥–µ–Ω—Ç—Ç–µ—Ä–≥–µ –∞—Ä–Ω–∞–ª“ì–∞–Ω –∞“õ–ø–∞—Ä–∞—Ç...",
                "en": "Information for students..."}[lang]
    elif call.data == "menu_contacts":
        text = {"ru": "–ö–æ–Ω—Ç–∞–∫—Ç—ã —É–Ω–∏–≤–µ—Ä—Å–∏—Ç–µ—Ç–∞...",
                "kz": "–£–Ω–∏–≤–µ—Ä—Å–∏—Ç–µ—Ç—Ç—ñ“£ –±–∞–π–ª–∞–Ω—ã—Å –Ω”©–º—ñ—Ä–ª–µ—Ä—ñ...",
                "en": "University contact information..."}[lang]
    elif call.data == "menu_ai":
        text = {"ru": "–ù–∞–ø–∏—à–∏—Ç–µ –≤–∞—à –≤–æ–ø—Ä–æ—Å, –∏ —è –ø–æ–ø—Ä–æ–±—É—é –æ—Ç–≤–µ—Ç–∏—Ç—å.",
                "kz": "–°“±—Ä–∞“ì—ã“£—ã–∑–¥—ã –∂–∞–∑—ã“£—ã–∑, –∂–∞—É–∞–ø –±–µ—Ä—É–≥–µ —Ç—ã—Ä—ã—Å–∞–º—ã–Ω.",
                "en": "Type your question, and I‚Äôll try to answer."}[lang]
    elif call.data == "menu_lang":
        choose_language(call.message, edit=True, call=call)
        return

    bot.edit_message_text(
        chat_id=call.message.chat.id,
        message_id=call.message.message_id,
        text=text
    )

print("‚úÖ –ë–æ—Ç –∑–∞–ø—É—â–µ–Ω")
bot.polling(none_stop=True)
